## 5.1 통합테스트 작성하기 - ProductFilter

- filter 스토어 모킹
- api msw로 모킹
- api 요청이 있을 경우 getBy-가 아닌 findBy- 쿼리를 사용하여 일정시간 요청을 대기
  (장바구니 테스트)

## 5.2 통합 테스트 작성하기 - NavigationBar

- describe 내부에 설정된 beforeEach(setup)은 다른 컨텍스트에 영향을 미치지 않음
- api를 목킹하기 위해서 server.use를 사용해야 함

> msw를 목킹해서 데이터를 바꾼 경우 server.resetHandlers()를 사용해주는데 setupTests.js에서 모든 테스트에서 리셋하는게 효율적일까?

## 5.3 통합 테스트의 한계 - 구매 페이지

- 페이지 내 전체 워크플로우를 검증하는 경우 모킹에 의존하게 됨
  - 잘못된 모킹이 있을 경우 신뢰도가 낮아짐
- E2E 테스트를 사용하면 앱을 구동시켜 모킹에 의존하지 않고 실제 api로 워크플로우 검증 가능
- 개발 단계에서는 단위, 통합 테스트로 도메인 별 비즈니스 로직을 검증하고, 앱의 완성 단계에 전체 워크 플로우를 e2e테스트로 검증

> 통합테스트와 E2E 테스트의 구분을 해야함

## 5.4 Github Actions을 통한 테스트 자동화

- 원하는 시점에 테스트 액션을 실행하여 피드백을 받을 수 있음
  > 젠킨스 사용 테스트 자동화

## 5.5 1부 마무리

- 테스트 코드의 효과
  - 리팩토링 : 거대한 범위의 리팩토링도 안정성 있게 진행 가능
  - 문서 : 테스트 코드는 앱의 이해를 돕는 좋은 문서
  - 좋은 설계 : 테스트 단위에 대한 고민은 좋은 설계에 대한 사고로 이어짐
- 테스트 작성 시 중요한 규칙

  1. 인터페이스 기준으로 테스트를 작성

  - 내부 구현에 대한 의존성이 없어야함
  - UI와 이벤트를 기준으로 동작을 확인

  2. 의미 있는 테스트인지 고민

  - 커버리지 100% 보다 유의미한 기능을 검증할 수 있는지 확인

  3. 테스트 코드의 가독성

  - 테스트 description을 명확하게 작성
  - 하나의 테스트에서는 가급적 하나의 동작만 검증 (SRP 원칙)

- 단위테스트 : 특정 도메인에 종속되기 보다 모듈 자체만으로 독립적으로 동작하는 모듈
- 통합테스트 : 두 개 이상의 모듈이 상호 작용하여 발생하는 상태를 검증
  - 상태 관리나 API는 최상단 컴포넌트에서 관리하는 것이 좋음
